
/* --- Base --- */
:root{
  --bg-top:#0b1220;
  --bg-bottom:#05070d;
  --glass: rgba(255,255,255,.06);
  --glass-strong: rgba(255,255,255,.12);
  --text: #eceef3;
  --muted:#a0a6b5;
  --accent:#4d7cff;
  --ok:#2fbf71;
  --danger:#ff5d5d;
  --shadow: 0 8px 30px rgba(0,0,0,.45);
}
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  color:var(--text);
  background: linear-gradient(180deg,var(--bg-top),var(--bg-bottom)) fixed;
  font-family: -apple-system, BlinkMacSystemFont,"SF Pro Text","Helvetica Neue", Helvetica, Arial, "Segoe UI", Roboto, sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  letter-spacing:.2px;
  padding-bottom: calc(env(safe-area-inset-bottom) + 120px); /* space for FAB */
}

a,button{font-family:inherit}
button{border:0;background:transparent;color:inherit;cursor:pointer}
.hidden{display:none !important}
.muted{color:var(--muted)}

/* --- Header (no container) --- */
.app-header{
  position: sticky; top:0; z-index:20;
  padding: calc(env(safe-area-inset-top) + 12px) 16px 10px;
  backdrop-filter: blur(10px) saturate(120%);
  background: linear-gradient(180deg, rgba(0,0,0,.35), rgba(0,0,0,0));
}
.title{margin:0;font-weight:800;font-size:28px;letter-spacing:.2px}

/* settings button */
.btn-glass.round{
  position:absolute; right:12px; top: calc(env(safe-area-inset-top) + 8px);
  width:40px;height:40px;border-radius:999px;
  background: rgba(255,255,255,.1);
  backdrop-filter: blur(14px);
  display:grid;place-items:center;
  box-shadow: var(--shadow);
  transition: transform .2s ease, background .2s ease;
}
.btn-glass.round:active{transform:scale(.96)}
.btn-glass.round.small{width:34px;height:34px; top:auto; box-shadow:none}

.btn-icon{width:34px;height:34px;border-radius:10px;background:var(--glass);color:var(--text)}
.btn-ok{background: rgba(77,124,255,.28); color:white; box-shadow: var(--shadow)}
.btn-ok.round{width:34px;height:34px;border-radius:999px}

/* --- Cards (light glass, smaller) --- */
.card-glass{
  margin:14px 16px;
  padding:14px;
  border-radius:18px;
  background: rgba(255,255,255,.05);
  backdrop-filter: blur(14px) saturate(120%);
  box-shadow: var(--shadow);
  border: 1px solid rgba(255,255,255,.06);
}
.card-glass.compact{padding:12px}

.date-line h2{margin:6px 0 6px;font-size:24px;font-weight:800}
.sub-line{display:flex;align-items:center;gap:10px;justify-content:space-between}
.sub-line #monthLabel{opacity:.85}
.btn-glass{
  display:inline-flex; align-items:center; gap:8px;
  padding:10px 14px; border-radius:14px;
  background: rgba(255,255,255,.08); color:var(--text);
  backdrop-filter: blur(10px); border:1px solid rgba(255,255,255,.08);
}
.btn-glass .ico.calendar{width:14px;height:14px;display:inline-block; background: currentColor; -webkit-mask: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="white"><path d="M7 2h2v3H7zM15 2h2v3h-2z"/><rect x="3" y="5" width="18" height="16" rx="3"/><path d="M3 10h18"/></svg>') no-repeat center / 100% 100%; mask: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="white"><path d="M7 2h2v3H7zM15 2h2v3h-2z"/><rect x="3" y="5" width="18" height="16" rx="3"/><path d="M3 10h18"/></svg>') no-repeat center / 100% 100%}
h3{margin:6px 0 12px; font-size:22px}

/* --- Calendar --- */
.calendar-wrap{
  margin:0 16px 10px;
  padding:12px; border-radius:18px; background:rgba(255,255,255,.04);
  backdrop-filter: blur(14px); border:1px solid rgba(255,255,255,.06);
  box-shadow: var(--shadow);
}
.cal-header{display:flex;align-items:center;justify-content:space-between;margin:4px 4px 10px}
#calMonthTitle{font-weight:700;opacity:.95}
.cal-grid{display:grid;grid-template-columns:repeat(7,1fr);gap:8px}
.cal-grid .dow{opacity:.7;font-size:12px;text-align:center;padding:6px 0}
.cal-grid .day{height:36px;border-radius:12px;display:grid;place-items:center;background:rgba(255,255,255,.05);border:1px solid rgba(255,255,255,.06);cursor:pointer;transition:transform .15s ease, background .2s}
.cal-grid .day.blank{background:transparent;border-color:transparent;pointer-events:none}
.cal-grid .day:hover{transform:translateY(-1px)}
.cal-grid .day.today{outline:2px solid rgba(77,124,255,.65)}
.cal-grid .day.selected{background:rgba(77,124,255,.25)}

/* --- Timeline --- */
#entries{display:flex;flex-direction:column;gap:10px}
.entry{
  display:flex;gap:10px;align-items:center;
  padding:10px 12px;border-radius:14px;
  background: rgba(255,255,255,.04); border:1px solid rgba(255,255,255,.06);
}
.dot{width:10px;height:10px;border-radius:999px}
.dot.note{background:#b48ef7}
.dot.call{background:#6fb1ff}
.dot.place{background:#59d18c}
.entry .meta{opacity:.85}

/* --- FAB & Search --- */
.fab{
  position: fixed; left:50%; transform: translateX(-50%);
  bottom: calc(env(safe-area-inset-bottom) + 24px);
  z-index: 50;
  width:74px;height:44px;border-radius:22px;
  background: linear-gradient(180deg, #4d7cff, #2a56d4);
  box-shadow: 0 10px 40px rgba(35,86,220,.55);
  display:grid;place-items:center;
}
.fab .fab-core{font-size:28px;line-height:0;margin-top:-2px}
.floater.search{
  position: fixed; right: 16px; bottom: calc(env(safe-area-inset-bottom) + 28px);
  z-index: 50; width:52px;height:52px;border-radius:999px;
  background: rgba(255,255,255,.1); backdrop-filter: blur(10px); display:grid;place-items:center; box-shadow: var(--shadow);
}

/* --- Overlay options --- */
.overlay{
  position: fixed; inset:0; z-index:40;
  backdrop-filter: blur(14px) brightness(.7);
  background: rgba(10,12,20,.35);
  opacity:0; pointer-events:none; transition: opacity .2s ease;
}
.overlay.show{opacity:1; pointer-events:auto}
.sheet-options{position:absolute; left:0; right:0; bottom: calc(env(safe-area-inset-bottom) + 98px); display:flex; gap:12px; justify-content:center}
.opt{
  width:108px; height:110px; border-radius:24px;
  background: rgba(255,255,255,.08); backdrop-filter: blur(12px); border:1px solid rgba(255,255,255,.06);
  display:flex;flex-direction:column;align-items:center;justify-content:center;gap:8px;
  transform: translateY(16px); opacity:0;
  transition: transform .28s cubic-bezier(.22,.7,.14,1), opacity .28s ease;
}
.overlay.show .opt{transform: translateY(0); opacity:1}
.overlay.show .opt:nth-child(2){transition-delay:.04s}
.overlay.show .opt:nth-child(3){transition-delay:.08s}
.opt-ico{font-size:22px;line-height:0}

/* --- Sheets --- */
.sheet{
  position: fixed; inset:0; z-index:60;
  display:flex; flex-direction:column;
  background: rgba(0,0,0,.45);
  backdrop-filter: blur(16px);
  opacity:0; pointer-events:none; transition: opacity .2s ease;
}
.sheet.show{opacity:1; pointer-events:auto}
.sheet-head{display:flex; align-items:center; justify-content:space-between; padding: 10px 14px; margin-top: env(safe-area-inset-top);}
.sheet-body{
  background: rgba(255,255,255,.04);
  border-top-left-radius: 20px; border-top-right-radius: 20px;
  margin-top:8px; padding:14px; flex:1; overflow:auto;
  border-top:1px solid rgba(255,255,255,.08);
}
.sheet .round{background: rgba(255,255,255,.1)}

/* forms */
.field{display:flex;flex-direction:column;gap:6px;margin:8px 0}
.field label{opacity:.85}
.input{
  width:100%; padding:12px 14px; border-radius:14px; color:var(--text);
  background: rgba(255,255,255,.06); border:1px solid rgba(255,255,255,.08);
  outline:none; transition: border-color .2s, background .2s;
}
.input:focus{border-color: rgba(77,124,255,.6); background: rgba(255,255,255,.08)}
.row{display:flex;gap:10px}
.row .input{flex:1}

/* Detail */
.detail-actions{display:flex;gap:8px}
.btn-glass.danger{background:rgba(255,93,93,.18)}

/* Small helpers */
#noEntries{padding:12px;border:1px dashed rgba(255,255,255,.15); border-radius:14px}

/* compact sizing tweaks */
@media (min-width:390px){
  .date-line h2{font-size:26px}
}
