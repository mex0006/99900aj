/* v9.3 - AMOLED Black + Liquid Glass */
:root{
  --bg:#000;
  --glass-bg: rgba(255,255,255,0.06);
  --glass-bd: rgba(255,255,255,0.12);
  --glass-blur: 16px;
  --text:#f2f2f7;
  --muted:#a1a1a6;
  --accent:#3b82f6;
  --success:#22c55e;
  --danger:#ef4444;
  --radius:16px;
  --fs-base:clamp(16px, 1.9vw, 17px);
  --fs-title:clamp(22px, 4vw, 28px);
  --fs-sub:clamp(18px, 2.4vw, 20px);
}
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  font-family: ui-sans-serif, system-ui, -apple-system, "SF Pro Text", "SF Pro Display", Roboto, "Segoe UI", Arial, sans-serif;
  background:var(--bg);
  color:var(--text);
  -webkit-font-smoothing:antialiased;
  text-rendering:optimizeLegibility;
}
.app-header{
  position: sticky; top:0; z-index:50;
  display:flex; justify-content:space-between; align-items:center;
  padding:20px 18px; margin:12px; border-radius:var(--radius);
}
.hdr-title{ font-weight:700; font-size:var(--fs-title); letter-spacing:.3px}
.glass{
  background:var(--glass-bg);
  border:1px solid var(--glass-bd);
  backdrop-filter: blur(var(--glass-blur));
  -webkit-backdrop-filter: blur(var(--glass-blur));
  border-radius:var(--radius);
  box-shadow: 0 10px 24px rgba(0,0,0,.45);
}
.beam{ width:18px; height:18px; border-radius:999px; position:relative; box-shadow:0 0 18px rgba(255,255,0,.35) inset;}
.beam-idle{ background: radial-gradient(circle at 50% 50%, #facc15 35%, #a16207 60%, #000 100%); }
.beam-ok{ background: radial-gradient(circle at 50% 50%, #22c55e 35%, #14532d 60%, #000 100%); box-shadow: 0 0 18px rgba(34,197,94,.35), 0 0 34px rgba(34,197,94,.2);}

#content{ padding: 0 12px 96px 12px; }
.section{ padding:16px; margin:12px; }
.title{ font-size:var(--fs-title); margin:0 0 8px 0; }
.subtitle{ font-size:var(--fs-sub); margin:0 0 10px 0; }
.row{ display:flex; gap:10px; }
.row.center{ align-items:center; }
.row.between{ justify-content:space-between; }
.row.gap{ gap:12px; }
.btn{ padding:10px 14px; border-radius:12px; border:1px solid var(--glass-bd); color:var(--text); background:transparent }
.btn:active{ transform:scale(.98) }
.btn-danger{ background: rgba(239,68,68,.12); border-color: rgba(239,68,68,.35)}
.btn-glass{ background: rgba(255,255,255,.06) }
.icon-btn{ display:flex; align-items:center; gap:8px }
.icon{ font-size:18px }
.calendar{ margin-top:10px }
.timeline{ display:flex; flex-direction:column; gap:10px; }
.timeline.empty{ color:var(--muted) }
.input{
  width:100%; border:none; border-bottom:1px solid rgba(255,255,255,.18);
  padding:14px 0 10px 0; background:transparent; color:var(--text); font-size:var(--fs-base);
}
.input::placeholder{ color:rgba(255,255,255,.4) }
.tabbar{
  position:fixed; bottom:0; left:0; right:0; z-index:60; padding:10px 12px;
  display:grid; grid-template-columns: 1fr 1fr auto 1fr 1fr; align-items:center; gap:10px; border-top:1px solid var(--glass-bd);
  border-radius: 16px 16px 0 0;
}
.tab{ height:44px; border:none; background:transparent; color:#c7c7cc; font-size:20px; }
.tab.active{ color:var(--text) }
.fab{
  width:56px; height:56px; border-radius:999px; border:none; background:rgba(255,255,255,.12); color:#fff; font-size:28px;
  display:flex; align-items:center; justify-content:center; box-shadow:0 10px 22px rgba(0,0,0,.5);
}
.speed-dial{ position:fixed; bottom:86px; left:0; right:0; margin:auto; width:0; height:0; z-index:65; }
.dial{
  position:absolute; width:56px; height:56px; border-radius:999px; border:1px solid var(--glass-bd);
  background:rgba(255,255,255,.12); color:#fff; font-size:24px; display:flex; align-items:center; justify-content:center;
  box-shadow:0 10px 22px rgba(0,0,0,.48);
  transform: scale(0.2); opacity:0; transition: all .23s ease;
}
.dial.show{ transform: scale(1); opacity:1 }
.dial-left{ left:calc(50% - 96px); bottom:0 }
.dial-right{ left:calc(50% + 40px); bottom:0 }
.dial-top{ left:calc(50% - 28px); bottom:64px }

.overlay{
  position:fixed; inset:0; z-index:100; display:flex; align-items:flex-start; justify-content:center; padding:8px;
  background: rgba(0,0,0,.55);
}
.overlay-inner{
  width:min(720px, 100%); margin-top:8px;
}
.overlay-top{ display:flex; align-items:center; justify-content:space-between; gap:12px; padding:8px 8px 6px 8px }
.circle-btn{
  width:44px; height:44px; border-radius:999px; border:1px solid var(--glass-bd); color:#fff; font-size:24px; line-height:0;
  display:flex; align-items:center; justify-content:center;
}
.circle-primary{ background: rgba(59,130,246,.18); border-color: rgba(59,130,246,.45) }
.editor-title{ font-weight:700; font-size:20px; opacity:.9 }
.editor-body{ padding:12px; margin:6px 8px 8px 8px; border-radius: var(--radius); border:1px solid var(--glass-bd); background:rgba(255,255,255,.06); backdrop-filter:blur(16px) }
.form-row{ display:flex; flex-direction:column; gap:6px; margin:10px 0 }
.label{ font-size:14px; color:var(--muted) }

.map-picker{ position:fixed; inset:0; z-index:120; display:flex; flex-direction:column; }
.leaflet-map{ flex:1; }
.picker-actions{
  position:absolute; bottom:18px; left:0; right:0; display:flex; justify-content:space-between; padding:0 18px; pointer-events:none;
}
.picker-actions .circle-btn{ pointer-events:auto }

.page{ padding:16px; margin:12px }
.file-btn{ position:relative; overflow:hidden; }
.hidden{ display:none !important }
