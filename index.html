<!doctype html>
<html lang="tr">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover, maximum-scale=1">
<meta name="theme-color" content="#0B1325">
<title>Ajanda v11</title>
<link rel="manifest" href="manifest.webmanifest">
<link rel="apple-touch-icon" href="icons/apple-touch-icon.png">
<link rel="stylesheet" href="css/main.css">
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="">
</head>
<body>
<div class="app" id="app">
  <div class="gear"><button class="icon-gear" id="btnSettings">⚙️</button></div>
  <div class="header">
    <div>
      <div class="title">Ajanda</div>
      <div class="meta">
        <div id="monthLabel">Ağustos 2025</div>
        <button id="btnToggleCal" class="badge"><span style="width:10px;height:10px;border-radius:50%;background:#4da3ff;display:inline-block"></span> Takvimi aç</button>
      </div>
    </div>
  </div>

  <div class="sep"></div>

  <div>
    <div class="section-title">Günün Zaman Çizelgesi</div>
    <div class="card" id="emptyState">Bu gün için kayıt yok.</div>
    <div class="list" id="timeline"></div>
  </div>

  <div class="drawer" id="calDrawer" style="margin-top:12px">
    <div class="calendar hidden" id="calendar">
      <div class="cal-head">
        <button class="icon-btn" id="prevMonth">‹</button>
        <div id="calTitle">Ağustos 2025</div>
        <button class="icon-btn" id="nextMonth">›</button>
      </div>
      <div class="grid" id="weekday">
        <div class="cell" style="border:none;background:transparent;opacity:.6">Pzt</div>
        <div class="cell" style="border:none;background:transparent;opacity:.6">Sal</div>
        <div class="cell" style="border:none;background:transparent;opacity:.6">Çar</div>
        <div class="cell" style="border:none;background:transparent;opacity:.6">Per</div>
        <div class="cell" style="border:none;background:transparent;opacity:.6">Cum</div>
        <div class="cell" style="border:none;background:transparent;opacity:.6">Cmt</div>
        <div class="cell" style="border:none;background:transparent;opacity:.6">Paz</div>
      </div>
      <div class="grid" id="calGrid"></div>
      <div style="display:flex;gap:8px; margin-top:10px">
        <button class="pill" id="btnToday">Bugün</button>
        <button class="pill ghost" id="btnCloseCal">Kapat</button>
      </div>
    </div>
  </div>
</div>

<div class="fab">
  <button class="fbtn" id="btnFab">+</button>
  <button class="sbtn" id="btnSearch">🔎</button>
</div>

<div class="scrim" id="scrim"></div>

<!-- Dock -->
<div class="dock" id="dock">
  <div class="dock-card" data-open="note"><div>📝</div><div>Not</div></div>
  <div class="dock-card" data-open="call"><div>📞</div><div>Çağrı</div></div>
  <div class="dock-card" data-open="loc"><div>📍</div><div>Konum</div></div>
</div>

<!-- Note Sheet -->
<div class="sheet" id="sheet-note">
  <div class="panel">
    <div class="panel-head"><div class="panel-title">Yeni Not</div><div class="rowf"><button class="pill" id="saveNote">Kaydet</button><button class="pill ghost" data-close>Vazgeç</button></div></div>
    <label class="label">Başlık</label>
    <input id="noteTitle" class="field" placeholder="opsiyonel">
    <label class="label">Not</label>
    <textarea id="noteBody" class="field" rows="5" placeholder="Metin..."></textarea>
    <label class="label">Etiketler (virgülle)</label>
    <input id="noteTags" class="field" placeholder="iş, aile">
    <label class="label">Saat</label>
    <input id="noteTime" class="field" inputmode="time" placeholder="14:30">
  </div>
</div>

<!-- Call Sheet -->
<div class="sheet" id="sheet-call">
  <div class="panel">
    <div class="panel-head"><div class="panel-title">Yeni Çağrı</div><div class="rowf"><button class="pill" id="saveCall">Kaydet</button><button class="pill ghost" data-close>Vazgeç</button></div></div>
    <label class="label">Tür</label>
    <div class="chips" id="callType">
      <div class="chip active" data-type="genel">Genel</div>
      <div class="chip" data-type="gelen">Gelen</div>
      <div class="chip" data-type="giden">Giden</div>
      <div class="chip" data-type="cevapsiz">Cevapsız</div>
    </div>
    <label class="label">Kişi</label>
    <input id="callPerson" class="field" placeholder="Ad, kişi...">
    <div class="rowf">
      <div style="flex:1">
        <label class="label">Saat</label>
        <input id="callTime" class="field" placeholder="14:30">
      </div>
      <div style="flex:1">
        <label class="label">Süre (dk)</label>
        <input id="callDur" class="field" inputmode="numeric" placeholder="5">
      </div>
    </div>
    <button class="pill ghost" id="callNow">Şimdi</button>
  </div>
</div>

<!-- Location Sheet -->
<div class="sheet" id="sheet-loc">
  <div class="panel">
    <div class="panel-head"><div class="panel-title">Yeni Konum</div><div class="rowf"><button class="pill" id="saveLoc">Kaydet</button><button class="pill ghost" data-close>Vazgeç</button></div></div>
    <label class="label">Başlık (opsiyonel)</label>
    <input id="locTitle" class="field">
    <label class="label">Not</label>
    <textarea id="locBody" class="field" rows="4"></textarea>
    <label class="label">Adres</label>
    <input id="locAddr" class="field" placeholder="Açık adres">
    <div id="map"></div>
    <div class="rowf" style="margin-top:10px">
      <button class="pill" id="pickOnMap">Haritada Nokta</button>
      <button class="pill ghost" id="useCurrent">Mevcut Konum</button>
    </div>
  </div>
</div>

<!-- Search Sheet -->
<div class="sheet" id="sheet-search">
  <div class="panel">
    <div class="panel-head"><div class="panel-title">Arama</div><div><button class="pill ghost" data-close>Kapat</button></div></div>
    <input id="searchInput" class="field" placeholder="kelime, kişi...">
    <div class="chips" id="searchChips" style="margin:10px 0"><div class="chip active" data-kind="all">Tümü</div><div class="chip" data-kind="note">Not</div><div class="chip" data-kind="call">Çağrı</div><div class="chip" data-kind="loc">Konum</div></div>
    <div class="list" id="searchResults"></div>
  </div>
</div>

<!-- Settings Sheet -->
<div class="sheet" id="sheet-settings">
  <div class="panel">
    <div class="panel-head"><div class="panel-title">Ayarlar</div><div><button class="pill ghost" data-close>Kapat</button></div></div>
    <div class="row">Sürüm <b>v11.0.0</b></div>
    <div class="rowf">
      <button class="pill" id="btnExport">Verileri JSON indir</button>
      <label class="pill ghost" style="cursor:pointer">JSON içe aktar<input id="fileImport" type="file" accept="application/json" style="display:none"></label>
      <button class="pill ghost" id="btnClear">Önbelleği Temizle (SW + Cache)</button>
      <button class="pill" style="background:#e23a4e" id="btnWipe">Tüm Kayıtları Sil</button>
    </div>
  </div>
</div>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
<script type="module" src="js/app.js"></script>
</body>
</html>
